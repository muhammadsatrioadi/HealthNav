@extends('layouts.shared')\n\n@section('content')\n<div class=\"container-fluid px-4\">\n    <h1 class=\"mt-4\">Edit MCU Registration #{{ $registration->registration_number }}</h1>\n    <ol class=\"breadcrumb mb-4\">\n        <li class=\"breadcrumb-item\"><a href=\"{{ route('admin.dashboard') }}\">Dashboard</a></li>\n        <li class=\"breadcrumb-item\"><a href=\"{{ route('admin.registrations.index') }}\">MCU Registrations</a></li>\n        <li class=\"breadcrumb-item active\">Edit</li>\n    </ol>\n\n    <div class=\"card mb-4\">\n        <div class=\"card-header\">\n            <i class=\"fas fa-edit me-1\"></i>\n            Edit Registration Details\n        </div>\n        <div class=\"card-body\">\n            @if ($errors->any())\n                <div class=\"alert alert-danger\">\n                    <ul>\n                        @foreach ($errors->all() as $error)\n                            <li>{{ $error }}</li>\n                        @endforeach\n                    </ul>\n                </div>\n            @endif\n\n            <form action=\"{{ route('admin.registrations.update', $registration->id) }}\" method=\"POST\">\n                @csrf\n                @method('PUT')\n                <div class=\"row mb-3\">\n                    <div class=\"col-md-6\">\n                        <label for=\"user_id\" class=\"form-label\">Patient User</label>\n                        <select class=\"form-select\" id=\"user_id\" name=\"user_id\" required>\n                            <option value=\"\">Select User</option>\n                            @foreach($users as $user)\n                                <option value=\"{{ $user->id }}\" {{ (old('user_id', $registration->user_id) == $user->id) ? 'selected' : '' }}>{{ $user->name }} ({{ $user->email }})</option>\n                            @endforeach\n                        </select>\n                        @error('user_id')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                    <div class=\"col-md-6\">\n                        <label for=\"hospital_id\" class=\"form-label\">Hospital</label>\n                        <select class=\"form-select\" id=\"hospital_id\" name=\"hospital_id\" required>\n                            <option value=\"\">Select Hospital</option>\n                            @foreach($hospitals as $hospital)\n                                <option value=\"{{ $hospital->id }}\" {{ (old('hospital_id', $registration->hospital_id) == $hospital->id) ? 'selected' : '' }}>{{ $hospital->name }}</option>\n                            @endforeach\n                        </select>\n                        @error('hospital_id')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                </div>\n\n                <div class=\"row mb-3\">\n                    <div class=\"col-md-4\">\n                        <label for=\"mcu_package\" class=\"form-label\">MCU Package</label>\n                        <select class=\"form-select\" id=\"mcu_package\" name=\"mcu_package\" required>\n                            <option value=\"\">Select Package</option>\n                            @foreach($mcuPackages as $package)\n                                <option value=\"{{ $package }}\" {{ (old('mcu_package', $registration->mcu_package) == $package) ? 'selected' : '' }}>{{ ucfirst($package) }}</option>\n                            @endforeach\n                        </select>\n                        @error('mcu_package')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label for=\"appointment_date\" class=\"form-label\">Appointment Date</label>\n                        <input type=\"date\" class=\"form-control\" id=\"appointment_date\" name=\"appointment_date\" value=\"{{ old('appointment_date', $registration->appointment_date->format('Y-m-d')) }}\" required>\n                        @error('appointment_date')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label for=\"appointment_time\" class=\"form-label\">Appointment Time</label>\n                        <input type=\"time\" class=\"form-control\" id=\"appointment_time\" name=\"appointment_time\" value=\"{{ old('appointment_time', \Carbon\Carbon::parse($registration->appointment_time)->format('H:i')) }}\" required>\n                        @error('appointment_time')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                </div>\n\n                <div class=\"mb-3\">\n                    <label for=\"medical_notes\" class=\"form-label\">Medical Notes</label>\n                    <textarea class=\"form-control\" id=\"medical_notes\" name=\"medical_notes\" rows=\"3\">{{ old('medical_notes', $registration->medical_notes) }}</textarea>\n                    @error('medical_notes')\n                        <div class=\"text-danger\">{{ $message }}</div>\n                    @enderror\n                </div>\n\n                <div class=\"row mb-3\">\n                    <div class=\"col-md-4\">\n                        <label for=\"status\" class=\"form-label\">Status</label>\n                        <select class=\"form-select\" id=\"status\" name=\"status\" required>\n                            @foreach($statuses as $s)\n                                <option value=\"{{ $s }}\" {{ (old('status', $registration->status) == $s) ? 'selected' : '' }}>{{ ucfirst($s) }}</option>\n                            @endforeach\n                        </select>\n                        @error('status')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label for=\"total_cost\" class=\"form-label\">Total Cost (Rp)</label>\n                        <input type=\"number\" class=\"form-control\" id=\"total_cost\" name=\"total_cost\" value=\"{{ old('total_cost', $registration->total_cost) }}\" step=\"0.01\" required>\n                        @error('total_cost')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                    <div class=\"col-md-4\">\n                        <label for=\"payment_status\" class=\"form-label\">Payment Status</label>\n                        <select class=\"form-select\" id=\"payment_status\" name=\"payment_status\" required>\n                            @foreach($paymentStatuses as $ps)\n                                <option value=\"{{ $ps }}\" {{ (old('payment_status', $registration->payment_status) == $ps) ? 'selected' : '' }}>{{ ucfirst($ps) }}</option>\n                            @endforeach\n                        </select>\n                        @error('payment_status')\n                            <div class=\"text-danger\">{{ $message }}</div>\n                        @enderror\n                    </div>\n                </div>\n\n                <div class=\"d-flex justify-content-between\">\n                    <button type=\"submit\" class=\"btn btn-primary\"><i class=\"fas fa-save me-2\"></i>Update Registration</button>\n                    <a href=\"{{ route('admin.registrations.index') }}\" class=\"btn btn-secondary\">Cancel</a>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n@endsection 